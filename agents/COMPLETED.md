# Completed Tasks

Append-only archive. Each entry: `[date] T-XXXX: Title (agent)` or historical `[date] Description`.

---
- [2026-02-20] T-0100: NPC idle animations — BREATHE_SCALE_DELTA=0.03/BREATHE_HALF_DURATION=1.1s scale.y breathing tween, HEAD_TURN_MIN=3.5s/MAX=8.0s random flip_h head turn via SceneTreeTimer; start/stop wired to _ready/_on_dialogue_ended/interact; 8 tests (1438 total) (claude)
- [2026-02-20] T-0141: Settings menu accessibility — compute_slider_tooltip() pure helper (master/bgm/sfx descriptions), ↺ reset-to-default buttons per slider, "← → keys: adjust" keyboard hint label; 4 new tests (1430 total) (claude)
- [2026-02-20] T-0155: Wire victory dismiss prompt to InputMap — compute_dismiss_prompt_from_events() pure helper extracts key/button labels from InputEvent array, compute_dismiss_prompt_text() reads live InputMap.action_get_events() with has_action guard; 3 new tests (1426 total) (claude)
- [2026-02-20] T-0127: Playtime display on title screen — compute_playtime_str(seconds) formats as "HH:MM" (empty for <60s), compute_save_summary() gains playtime_str key, _show_save_label() includes playtime between location and date; 7 tests (1423 total) (claude)
- [2026-02-20] T-0165: Party UI keyboard/gamepad navigation — already implemented: _setup_focus() wires UIHelpers.setup_focus_wrap + cross-column left/right + back button; compute_cross_column_focus_index() in party_ui_data.gd with 5 tests (claude)
- [2026-02-20] T-0172: BanterManager scaffold — static RefCounted class with BANTERS registry (key/gate/party/locations), compute_eligible_banters(party_ids, flags, location) returns eligible keys, bond_01_knife_lessons registered; 8 tests (1416 total) (claude)
- [2026-02-20] T-0166: Defend stance persist bug — already fixed: end_turn() does not clear is_defending, PlayerTurnState.enter() clears it at next player turn; test_end_turn_does_not_clear_defend confirms behavior (claude)
- [2026-02-20] T-0174: Iris personal quest stub — iris_engineers_oath.tres (QuestData "The Engineer's Oath: Pending", CHARACTER type), IRIS_QUEST_PATH constant + compute_should_auto_accept_iris_quest() static helper in iris_recruitment.gd, auto-accept after post-battle dialogue; 3 new tests (1408 total) (claude)
- [2026-02-20] T-0167: Playtime accumulation gate — superseded by T-0130 (compute_should_tick_playtime() gates to OVERWORLD/MENU only) (claude)
- [2026-02-20] T-0173: Garrick personal quest stub — garrick_three_burns.tres (QuestData "Something He Carries", CHARACTER type), GARRICK_QUEST_PATH constant + compute_should_auto_accept_garrick_quest() static helper in garrick_recruitment.gd, auto-accept on recruitment; 3 new tests (1405 total) (claude)
- [2026-02-20] T-0175: BGM pop/restore fade-in — BGM_RESTORE_FADE_TIME=0.5s constant, compute_bgm_restore_fade_duration() static helper, pop_bgm() cold-start else branch tweens volume from -80.0 to _bgm_volume_db; 2 new tests (1402 total) (claude)
- [2026-02-20] T-0164: Wire party_changed signal into party_ui — _connect/_disconnect_party_signals() with is_connected guard, _on_party_changed() live rebuild, removed redundant manual _build_ui() after swap; 5 new tests (1400 total) (claude)
- [2026-02-20] T-0169: BOND-01 Knife Lessons banter — VerdantForestBond01Dialogue static module (5-line Iris/Kael knife grip scene), compute_bond01_eligible() helper, wired via call_deferred in verdant_forest.gd; 13 new tests (1395 total) (claude)
- [2026-02-20] T-0170: Innkeeper night event priority — RootHollowNightEvents static helper (GarrickNightScene > CampThreeFires priority), roothollow.gd if/elif dispatch replaces dual-if bug; 11 new tests (1382 total) (claude)
- [2026-02-20] T-0096: Particle effects for healing/resonance/crits — BattleParticles static module (resonance flash colors, crit flash color/duration), resonance_state_changed wired in PartyBattlerScene, scene-wide crit flash in ActionExecuteState; 11 new tests (1371 total) (claude)
- [2026-02-20] T-0138: Scrollable battle log — BattleUILog.compute_log_entry() static helper extracted from battle_ui.gd; scroll_following=true already in .tscn; 7 new tests (1287 total) (claude)
- [2026-02-20] T-0162: Verdant Forest traversal dialogue — VerdantForestDialogue static module (get_traversal_lines/flag/gate_flag), _maybe_trigger_traversal_dialogue via call_deferred in verdant_forest.gd, 4-line scene with Garrick/Iris/Kael; 9 new tests (1296 total) (claude)
- [2026-02-20] T-0163: Party swap validation feedback — compute_swap_feedback_text() in party_ui_data.gd, _show_swap_error() tween flash + transient label in party_ui.gd; 5 new tests in test_party_ui_feedback.gd (1301 total) (claude)
- [2026-02-20] T-0148: Camp scene "Three Around a Fire" — CampThreeFires event script (15-line Garrick/Iris/Kael campfire dialogue), wired into roothollow.gd innkeeper handler on garrick_recruited flag; 12 new tests (1313 total) (claude)
- [2026-02-20] T-0135: Garrick night scene — GarrickNightScene event script (10-line quiet reflection at Roothollow: shield monologue, Kael comparison, Iris anger), gated by garrick_met_lyra flag; 12 new tests (1325 total) (claude)
- [2026-02-20] T-0137: Roothollow market expansion — RootHollowShop.compute_item_paths() module, Forest Remedy (HEAL_HP 80) and Crystal Wick (HEAL_EE 30) unlock after iris_recruited; 7 new tests (1332 total) (claude)
- [2026-02-20] T-0171: Overgrown Capital entry scene — OvergrownRuinsEntryDialogue static module (7-line gate dialogue: Kael awe, Iris crystal density, Garrick grief for two million, navigation call), gated by garrick_recruited, fires once via overgrown_capital_entry_seen; 13 new tests (1345 total) (claude)
- [2026-02-20] T-0093: Fragment tracker compass UI — HudFragmentTracker static module (compute_signal_direction/compute_tracker_display), directional arrow label in HUD top-right gated by opening_lyra_discovered/garrick_met_lyra, refreshes on scene_changed and OVERWORLD state; 15 new tests (1360 total) (claude)

[2026-02-20] T-0098: Add overworld encounter warning — two-phase encounter_warning→encounter_triggered flow with 0.8s delay; yellow screen flash in Verdant Forest and Overgrown Ruins (claude)

- [2026-02-20] T-0078: AssetLoader static utility — load_sfx/bgm/texture/scene/resource with exists() guard + push_warning, 10 tests, PR merged (claude)
- [2026-02-20] T-0061: Overgrown Ruins debris layer & z-index fix — GroundDebris layer, Walls/Objects z_index 0 (was -1), walls now visible, 5 tests, PR merged (claude)
- [2026-02-20] T-0058: Screen shake on heavy damage — BattleShake static utility (is_heavy_hit, compute_intensity, shake), 25% HP threshold, 3–7px intensity, wired in action_execute_state, 10 tests, PR merged (claude)
- [2026-02-20] T-0160: Quest-NPC indicator refresh — compute_npc_indicator_type() in roothollow_quests.gd, QuestManager signal wiring in roothollow _ready(), 7 tests, PR #201 (claude)
- [2026-02-20] T-0057: Turn order display — compute_turn_order_entries() static helper, [Active] brackets with ACTIVE_HIGHLIGHT, ally=blue enemy=red, 6 tests, PR #200 (claude)
- [2026-02-20] T-0165: Party UI cross-column keyboard/gamepad focus nav — compute_cross_column_focus_index() helper, _setup_focus() two-column rewrite, 5 tests, PR #199 (claude)
- [2026-02-20] T-0166: BUG defend stance persists through TurnEnd — removed is_defending=false from end_turn(), cleared in PlayerTurnState.enter(); 4 tests updated, PR #198 (claude)
- [2026-02-20] T-0133: Save slot summary on Continue button — timestamp in gather_save_data, compute_save_summary/format_save_timestamp static helpers, _show_save_label programmatic label below ContinueButton, 8 tests, PR #197 (claude)
- [2026-02-20] T-0132: Add DEF badge on party battler panels — DEFEND_BADGE_COLOR, compute_defend_badge() static helper, wired in _create_party_row, fixed TurnEnd/PlayerTurnState timing for badge visibility, 4 tests, PR #196 (claude)
- [2026-02-20] T-0149: Add Spring Shrine interactable south of Roothollow — RoothollowZone module with compute_garrick_zone_can_trigger/compute_shrine_marker_visible, shrine direction label, 8 tests (claude)
- [2026-02-20] T-0159: Fix Verdant Forest south canopy gap — CANOPY_MAP rows 15-22 filled with 88 type-matched 2x2 canopy tiles above 22 south-half trunks, 6 tests (claude)
- [2026-02-20] T-0020: Build party management UI — party_ui_data.gd (compute_member_display/compute_swap_valid/compute_panel_sections), party_ui.gd (Control sub-screen, two-column active/reserve swap), pause_menu wired, 15 tests, PR #194 (claude)
- [2026-02-20] T-0101: Party formation and swap UI — compute_equipment_slots helper, character detail panel in party_ui showing stats + equipment slots, 5 new tests, PR #195 (claude)
- [2026-02-19] T-0134: Elder Thessa Overgrown Capital briefing — 7-line one-time scene (garrick_recruited gate), thessa_briefing_seen flag, research quarter + time constraint + Initiative threat, CUTSCENE push/pop, 7 tests (claude)
- [2026-02-19] T-0131: Kael-Iris arrival cutscene at Roothollow — 6-line dialogue, iris_recruited gate, roothollow_iris_arrival_seen flag, GameManager CUTSCENE push/pop, call_deferred trigger, 6 tests (claude)
- [2026-02-19] T-0121: Roothollow Chapter 4 NPC dialogue — iris_recruited branches for Maren/Bram/Wren/Lina with story-accurate content (food offer, shrine stranger, deserter ID, horse question), 8 tests (claude)
- [2026-02-19] T-0128: AudioManager BGM volume persistence — _bgm_volume_db field, set_bgm_volume() persists across crossfades and cold starts, 5 tests (claude)
- [2026-02-19] T-0119: Quest log item reward display names — compute_item_display_name() static helper, ResourceLoader.exists() guard, fallback to ID string, items as Array[String] of display names, ", ".join() rendering, 3 new tests (claude)
- [2026-02-19] T-0120: Quest accept/complete toast notification in HUD — compute_toast_text() static helper, _setup_quest_toast() Label at PRESET_CENTER_BOTTOM in gold, queue-based coroutine, fade-in/hold/fade-out, 7 tests (claude)
- [2026-02-19] T-0143: Critical hit mechanic — compute_crit_chance/roll_crit/apply_crit in BattlerDamage; 5% base + luck*0.5% formula; ×1.5 damage, COMBAT_CRITICAL_HIT SFX, CRITICAL popup; death SFX on killing crit; 12 tests (claude)
- [2026-02-19] T-0136: Player-driven defeat screen — defeat_action_chosen signal, compute_defeat_options(has_save), RetryButton hidden if no save, defeat_state awaits choice then loads save or title, 9 tests (claude)
- [2026-02-19] T-0129: Player-driven victory screen dismissal — GRACE_PERIOD=0.5, show_victory_dismiss_prompt("interact"), victory_dismissed signal, 7 tests; fixed stale z_index test (tscn parsing); verdant forest ground/canopy improvements (claude)
- [2026-02-19] T-0147: Add battle auto-play mode to playtest runner — auto_play_battle action type, polls BattleStateMachine states, emits attack/target signals automatically, captures outcome via BattleManager.battle_ended, logs HP balance data, 4 tests (claude)
- [2026-02-19] T-0146: Create /playtest skill and preset configs — 7 preset JSON configs, /playtest SKILL.md, fixed runner scene loading to use call_deferred (runner persists across scene changes), end-to-end verified (claude)
- [2026-02-19] T-0145: Add full action set to playtest runner — PlaytestActions registry (14 types), interact/cancel/menu/advance_dialogue/wait_dialogue/select_choice/trigger_battle/wait_battle/wait_state/set_flag/log, structured log file, 36 tests (claude)
- [2026-02-19] T-0144: Build playtest runner core — playtest_runner.tscn/gd, playtest_config.gd (JSON+CLI parse), playtest_capture.gd (screenshot+report), state injection (party/flags/items/gold/equipment/quests), basic actions (wait/screenshot/move), timeout exit, 34 tests (claude)
- [2026-02-19] T-0092: Add tutorial hints for controls on first playthrough — TutorialHints utility, HUD overlay with tween animation, interact-only dismiss, 3 hint types in 2 scenes, EventFlags persistence, 11 tests (claude)
- [2026-02-19] T-0083: Update Roothollow NPC dialogue to match story scripts and style guide — Verdant Tangle slang for 5 NPCs, Cindral Wastes voice for Garrick, fixed 4 cliché lines, 6 new tests (claude)
- [2026-02-19] T-0139: Source SFX assets for UI and combat — 10 procedural placeholder OGGs, SfxLibrary constants class, sfx/CLAUDE.md, 7 tests (claude)
- [2026-02-19] T-0084: Add companion follower sprites in overworld — CompanionController/CompanionFollower, Iris+Garrick sprites, position history buffer, 18 tests (claude)

## Pre-Tracker (2026-02-16 Audit)

These 26 fixes were completed before the ticket system was established:

- [2026-02-16] CRITICAL: Defeat state never ended battle — defeat_state.gd now calls battle_scene.end_battle(false) (claude)
- [2026-02-16] CRITICAL: Double-fire on target confirmation — removed callback pattern, now uses only target_selected signal (claude)
- [2026-02-16] CRITICAL: Hardcoded enum magic numbers — action_execute_state.gd now uses AbilityData.DamageStat.MAGIC etc. (claude)
- [2026-02-16] CRITICAL: Invisible battlers in battle — battle_scene.gd now instantiates visual scenes and binds to logic battlers (claude)
- [2026-02-16] CRITICAL: Iris recruitment post-battle unreachable — rewrote to use static functions and CONNECT_ONE_SHOT (claude)
- [2026-02-16] CRITICAL: Iris recruitment no victory check — post-battle now checks victory parameter (claude)
- [2026-02-16] CRITICAL: Duplicate Camera2D in Roothollow — fixed to use property override syntax (claude)
- [2026-02-16] CRITICAL: Missing icon.svg — created game/icon.svg placeholder (claude)
- [2026-02-16] CRITICAL: Missing audio bus layout — created default_bus_layout.tres with BGM and SFX buses (claude)
- [2026-02-16] HIGH: PartyManager array reference leak — get_active_party() and get_roster() now return .duplicate() (claude)
- [2026-02-16] HIGH: 6 trees missing collision in Roothollow — added StaticBody2D + CollisionShape2D (claude)
- [2026-02-16] HIGH: Dead code in player_turn_state.gd — removed unused pending variables (claude)
- [2026-02-16] HIGH: Dead DamageStat enum in CharacterData — removed duplicate from AbilityData (claude)
- [2026-02-16] HIGH: OVERLOAD_OUTGOING_DAMAGE_MULT type mismatch — changed int to float (claude)
- [2026-02-16] HIGH: TurnQueueState default to Victory on empty queue — now reinitializes turn order (claude)
- [2026-02-16] HIGH: Unused delta/event params — prefixed with _ in state.gd base class (claude)
- [2026-02-16] HIGH: NPC global dialogue signal — changed to CONNECT_ONE_SHOT per interaction (claude)
- [2026-02-16] HIGH: Duplicate AIType enum — EnemyBattler now uses EnemyData.AiType directly (claude)
- [2026-02-16] HIGH: Ability target_type ignored — target_select_state.gd now reads ability target_type (claude)
- [2026-02-16] HIGH: UILayer wrong type annotations — removed incorrect CanvasLayer type annotations (claude)
- [2026-02-16] MEDIUM: BattleAction parameter shadowing — renamed to p_ability/p_target in static constructors (claude)
- [2026-02-16] MEDIUM: VerdantForest to OvgrownRuins no spawn point — added spawn_from_forest Marker2D (claude)
- [2026-02-16] MEDIUM: Misleading sub-resource name — renamed RectangleShape2D_garrick to CircleShape2D_garrick (claude)
- [2026-02-16] MEDIUM: @onready with .new() — game_manager.gd now initializes in _setup_transition_layer() (claude)
- [2026-02-16] MEDIUM: HUD duck-typing — hud.gd now casts member to BattlerData (claude)
- [2026-02-16] MEDIUM: NPC portrait null warning — added push_warning() when portrait fails to load (claude)

## Sprint S01 — Foundation

- [2026-02-16] T-0001: WONTFIX — class_name on autoloads conflicts with singleton names; reverted (claude)
- [2026-02-16] T-0002: Extract TurnQueue into its own scene (claude)
- [2026-02-16] T-0003: Refactor Interactable into composition pattern — strategy pattern with 5 strategies (claude)
- [2026-02-16] T-0004: Replace Dictionary-based dialogue/encounter data with custom Resources (claude)
- [2026-02-16] T-0005: Replace meta-based state communication with typed BattleAction (claude)
- [2026-02-16] T-0006: Use AnimatedSprite2D for player animation (claude)
- [2026-02-16] Add automated testing infrastructure — GUT 9.x + gdlint, 59 unit tests, /run-tests skill, pre-push hooks (claude)
- [2026-02-16] T-0020: Battle system real-time UI sync, attack animations, damage popups, status effect application, 25 new tests (claude)
- [2026-02-16] BUG FIX: Battle UI lockup when using skills — cancel/EE handling, 9 new tests (claude)
- [2026-02-16] AUDIT: Full codebase audit — 10 bugs fixed, 129 new tests (93→222), 4-agent parallel sweep (claude)

## Sprint S02 — First Playable Demo

- [2026-02-16] PLANNING: Demo requirements, tech gaps, NPC dialogue content, sprint plan — 4-agent planning team (claude)
- [2026-02-16] T-0012: Build inventory system — InventoryManager autoload, gold tracking, item stacking (claude)
- [2026-02-16] T-0027: Party HP/EE persistence — runtime state on PartyManager, battle read/write (claude)
- [2026-02-16] T-0028: Wire item usage in battle — ActionSelectState item mode, inventory consumption (claude)
- [2026-02-16] T-0029: Innkeeper healing — PartyManager.heal_all() via innkeeper interaction (claude)
- [2026-02-16] T-0030: Battle victory rewards — gold and loot drops applied to InventoryManager (claude)
- [2026-02-16] T-0019: XP and leveling system — LevelManager utility, stat growth, battler level scaling (claude)
- [2026-02-16] T-0031: NPC dialogue content — 5 Roothollow NPCs with 4-state flag-reactive dialogue (claude)
- [2026-02-16] DEMO BUILD: 8-agent parallel implementation — 125 new tests (222→347), 797 assertions (claude)
- [2026-02-16] T-0032: Build basic save/load system — SaveManager autoload, JSON to user://saves/, wired save points + title screen Continue (claude)
- [2026-02-16] T-0033: Add demo conclusion event — Elder Thessa's garrick-recruited dialogue now hooks Prismfall and gives narrative closure (claude)
- [2026-02-16] T-0034: BUG FIX — Dialogue/encounter overlap — BattleManager guards against dialogue/cutscene/transition, scene handlers check state, 6 new tests (claude)
- [2026-02-16] INFRA: Scene preview tool — screenshot capture for agent visual verification, 3 camera modes, /scene-preview skill (claude)
- [2026-02-16] T-0013: Build equipment system — EquipmentData resource, EquipmentManager autoload, 5 slots, 16 weapon types, battler stat integration, save/load, 30 new tests (claude)
- [2026-02-16] T-0017: Implement status effect system — StatusEffectData resource, duration tracking, DoT/HoT, stat modifiers, stun/action prevention, backward-compatible API, battle state integration, 40 new tests (claude)
- [2026-02-16] T-0015: Resonance gauge UI and overload/hollow mechanics — Hollow penalizes all stats at 50%, Resonant +20% ability bonus, cure_hollow, battle log transitions, tween animations, per-member indicators, 17 new tests (claude)
- [2026-02-16] T-0016: Build quest tracking system — QuestData Resource, QuestManager autoload, objective tracking, prerequisite checking, save/load integration, 32 new tests (claude)
- [2026-02-16] T-0007: Wire unconnected signals to EventBus — EventBus autoload, entity signal relay, enemy_defeated/item_acquired/area_entered wiring, QuestManager flag_checker auto-connect, 22 new tests (claude)
- [2026-02-18] T-0035: Create Lyra character data and abilities — mage/healer stats, echo_mend, memory_strike, resonance_shield (claude)
- [2026-02-18] T-0036: Create The Last Gardener boss enemy data — BOSS AI, HP 350, vine_lash, crystal_bloom, photosynthesis, weak to FIRE (claude)
- [2026-02-18] T-0037: Create additional character abilities — flame_blade (Kael), precision_shot (Iris), iron_fortress (Garrick) (claude)
- [2026-02-18] T-0038: Create additional items and equipment — hi_potion, elixir, smoke_bomb, steel_sword, crystal_staff, chain_mail, mystic_ring, iron_shield (claude)
- [2026-02-18] T-0039: Create quest data files — herb_gathering, scouts_report, elder_wisdom with objectives and rewards (claude)
- [2026-02-18] T-0040: Build shop system — ShopData Resource, ShopManager autoload, buy/sell with price modifiers, 27 tests (claude)
- [2026-02-18] T-0041: Build inventory UI — category filtering, item use/equip, gamepad focus navigation, dark purple theme (claude)
- [2026-02-18] T-0042: Build shop UI — buy/sell mode tabs, item comparison, price display, gamepad navigation (claude)
- [2026-02-18] T-0043: Wire Lyra recruitment — OpeningSequence extended with Lyra dialogue and PartyManager.add_character (claude)
- [2026-02-18] T-0044: Build boss encounter — BossEncounter event, pre/post-battle dialogue, can_escape=false, boss_defeated flag (claude)
- [2026-02-18] T-0045: Wire shop NPC and side quests — Bram shop, 3 quest NPCs, memorial marker, quest chain logic (claude)
- [2026-02-18] T-0046: Integration — lint fixes, test fixes, file sync, 582/582 tests passing (claude)
- [2026-02-18] T-0047: Visual overhaul — multi-tile mushroom buildings, distinct NPC sprites, forest tree objects, sealed boundaries, broken symmetry (claude)
- [2026-02-18] T-0048: Organic tilemap overhaul — multi-terrain ground patches (3 types per scene), detail coverage 20-25%, all 3 scenes (claude)

## Sprint S03 — Demo Polish

- [2026-02-19] T-0049: BUG — Verdant Forest camera limit already fixed in codebase (claude)
- [2026-02-19] T-0051: Battle backgrounds — programmatic gradient backgrounds per area type (forest/ruins/town/cave), 10 tests (claude)
- [2026-02-19] T-0069: Extract shared UI helpers — ui_theme.gd (19 color constants), ui_helpers.gd (clear_children, setup_focus_wrap, create_panel_style), refactored 6 UI files, 19 tests (claude)
- [2026-02-19] T-0071: Centralize game balance constants — game_balance.gd (22 constants, 7 categories), refactored battler/enemy_battler/level_manager/party_manager/battle_ui, 23 tests (claude)
- [2026-02-19] T-0052: Color-code battle log messages — LogType enum + 7 LOG_* colors in ui_theme.gd, BBCode color wrapping in add_battle_log(), 25 call sites across 8 files, 16 tests (claude)
- [2026-02-19] T-0053: Floating damage numbers — reusable DamagePopup component (DAMAGE/HEAL/CRITICAL types), replaced inline single-label in both battler scenes, added show_heal_number() to EnemyBattlerScene, 11 tests (claude)
- [2026-02-19] T-0062: Boundary collision walls — MapBuilder.create_boundary_walls() static method, 4 invisible StaticBody2D walls per scene on collision layer 2, all 3 scenes wired, fixed CLAUDE.md map dimensions, 12 tests (claude)
- [2026-02-19] T-0059: Roothollow AbovePlayer canopy overlay — CANOPY_LEGEND (3 FOREST_OBJECTS tiles: center, left-edge, right-edge) + CANOPY_MAP at inner border edges, build_layer wired in _setup_tilemap() (claude)
- [2026-02-19] T-0087: On-screen objective tracker UI — PanelContainer in HUD below PartyStatus, QuestTitle + ObjectiveLabel labels, static compute_tracker_state() for TDD, 4 QuestManager signal connections, 7 tests (claude)
- [2026-02-19] T-0088: Zone transition markers — ZoneMarker script-only Node2D with _draw() chevron, alpha pulse + directional bob tweens, optional destination label, all 3 scenes wired (4 exits), 11 tests (claude)
- [2026-02-19] T-0089: NPC interaction indicators — IndicatorType enum (NONE/CHAT/QUEST/QUEST_ACTIVE/SHOP), floating Label with bob animation, proximity show/hide, dialogue-aware, dynamic quest-state for Roothollow NPCs, 13 tests (claude)
- [2026-02-19] T-0090: Quest log/journal UI — script-only Control from pause menu, Active/Completed tabs, quest list + detail panel, objectives/checkmarks, reward previews, compute_quest_list() pure function, QuestsButton in pause menu, 8 tests (claude)
- [2026-02-19] T-0079: Expand opening sequence — 6 to 23 lines matching Chapter 1 story script (discovery, analysis, first contact, identity, warning, resolve), _build_dialogue() helper, 9 tests (claude)
- [2026-02-19] T-0081: Expand Iris recruitment — 7 to 19 lines matching Chapter 3 story script (combat encounter, identity reveal, Resonance Cage, Lyra reveal, Dane foreshadowing, pragmatic joining), extracted _build_pre_battle_dialogue() + static _build_post_battle_lines(), 12 tests (claude)
- [2026-02-19] T-0082: Expand Garrick recruitment — 6 to 17 lines matching Chapter 4 story script (Iris Shepherd recognition, identity reveal, crystal corruption, Willowmere confession, Lyra proposition, conditions, honey cakes), extracted _build_dialogue(), 10 tests (claude)
- [2026-02-19] T-0080: Expand Lyra discovery dialogue — 23 to 48 lines compressing Ch1S5 + Ch2S2 (structured fragmentation, sealed truth, Resonance energy/fading, emotional connection, fragment quest hook), 6 new content tests (16 total) (claude)
- [2026-02-19] T-0070: Split battler.gd — 3 static utility classes (BattlerDamage, BattlerResonance, BattlerStatus) with delegation, tick_effects() kept in Battler, 28 new tests (779 total) (claude)
- [2026-02-19] T-0064: Integrate BGM playback — scene-owned BGM (SCENE_BGM_PATH + _start_scene_music), BattleManager battle/boss BGM with EnemyData.AiType.BOSS detection, victory fanfare, title BGM, AudioManager.get_current_bgm_path(), null-safe OGG loading, 8 tests (787 total) (claude)
- [2026-02-19] T-0050: BUG fix — Overgrown Ruins spawn position check used fragile Vector2.ZERO comparison, replaced with unconditional spawn point set (GameManager/SaveManager override after _ready) (claude)
- [2026-02-19] T-0124: BUG fix — XP never applied to party members after battle victory. Extracted static apply_xp_rewards(), calls LevelManager.add_xp() per CharacterData, logs level-ups in battle log, 9 new tests (796 total) (claude)
- [2026-02-19] T-0072: Create scene_paths.gd — centralized ScenePaths class (5 constants), refactored 8 consumer files (3 scenes, 3 UI, 1 autoload), 7 new tests (803 total) (claude)
- [2026-02-19] T-0115: BUG fix — Pause menu showed max HP/EE instead of current. Extracted static compute_member_stats() reading PartyManager runtime state, 7 new tests (810 total) (claude)
- [2026-02-19] T-0117: Implement BGM stack — push_bgm()/pop_bgm()/has_stacked_bgm() in AudioManager, BattleManager push/pop wiring, _crossfade_bgm_at() for position-aware restore, 8 new tests (818 total) (claude)
- [2026-02-19] T-0054: Add status effect icons/badges on battler panels — color-coded 2-char badges by EffectType (5 types), Battler accessors, UITheme colors, enemy battler status icons, BattleUI panel badges, 14 new tests (832 total) (claude)
- [2026-02-19] T-0055: Improve battle target selector — name label on TargetSelector, visual highlight tint (modulate cache/restore) on selected battler, compute_target_info() static method, TARGET_HIGHLIGHT colors in UITheme, 5 new tests (837 total) (claude)
- [2026-02-19] T-0056: Enhance victory screen — character portraits (atlas), name+level, "LEVEL UP!" callout with stat changes, compute_victory_display() static, show_victory() backward-compat extension, victory_state passes party+level_ups, 7 new tests (844 total) (claude)
- [2026-02-19] T-0091: Add area name display on zone transitions — centered popup Label with fade-in/hold/fade-out tween (0.3s/2.0s/0.5s), static compute_area_display_name(), AREA_NAMES dict for 3 zones, 5 new tests (849 total) (claude)
- [2026-02-19] T-0073: Split roothollow.gd — extracted roothollow_dialogue.gd (6 NPC dialogue functions) and roothollow_quests.gd (quest text + condition helpers), coordinator 803->389 lines, 849 tests pass (claude)
- [2026-02-19] T-0085: Implement Chapter 4 content — GarrickMeetsLyra event (14-line dialogue compressing Ch4 Scene 5), three-state LyraDiscoveryZone logic in overgrown_ruins.gd, "Are you in pain?" emotional peak, flag garrick_met_lyra, 12 new tests (861 total) (claude)
- [2026-02-19] T-0086: Demo ending sequence — DemoEnding event (4-line closing dialogue, BGM stop, scene transition to DemoEndScreen), party lineup with return-to-title, save-reload edge case, 17 new tests (885 total) (claude)
- [2026-02-19] T-0060: Roothollow ground detail density reduction — thinned DECOR_MAP from 18.5% to ~13% (89 decorations on 672 open tiles), 7 new tests for map dimensions and density bounds (868 total) (claude)
- [2026-02-19] T-0074: Split battle_ui.gd — extracted BattleUIStatus (compute_status_badges + compute_target_info) and BattleUIVictory (compute_victory_display + stat_abbreviation), 793->700 lines, updated 3 test preloads, 885 tests pass (claude)
- [2026-02-19] T-0075: Split inventory_ui.gd — extracted InventoryUIFilter (matches_category + compute_item_entries with Callable DI) and InventoryUIDetail (compute_equipment_stats + compute_item_detail), 602->531 lines, added HP/EE bonus display, 20 new tests (905 total) (claude)
- [2026-02-19] T-0076: Split shop_ui.gd — extracted ShopUIDetail (equip stat lines, item effect text, detail panel info) and ShopUIList (buy/sell entry computation with Callable DI), 484->457 lines, 20 new tests (925 total) (claude)
- [2026-02-19] T-0068: Settings menu — SettingsData (percent/dB conversion, bus-level volume, JSON persistence), SettingsMenu (3 HSliders, live preview, save on close), title screen + pause menu integration, AudioManager startup load, 14 new tests (939 total) (claude)
- [2026-02-19] T-0139: Source SFX assets for UI and combat — 10 procedural placeholder OGGs, SfxLibrary constants class, sfx/CLAUDE.md, 7 tests (964 total) (claude)
- [2026-02-19] T-0066: Add UI sound effects — wired AudioManager.play_sfx(load(SfxLibrary.UI_*)) into 8 UI scripts (27 insertion points), 4 SFX types (confirm/cancel/menu_open/dialogue_advance), covers dialogue/pause/title/settings/inventory/shop/quest_log/battle_ui (claude)
- [2026-02-19] T-0067: Add combat sound effects — wired AudioManager.play_sfx(load(SfxLibrary.COMBAT_*)) into action_execute_state.gd and enemy_turn_state.gd, 5 SFX types (attack_hit/magic_cast/heal_chime/death/status_apply), CRITICAL_HIT deferred (claude)
- [2026-02-19] T-0092: Add tutorial hints for controls — TutorialHints static utility (3 hints: interact, menu, zone_travel), HUD overlay with tween fade animation, interact-only dismiss, state-change cleanup, triggers in scene scripts, EventFlags for show-once persistence, 11 new tests (981 total) (claude)
- [2026-02-19] T-0094: Implement battle ability VFX — BattleVFX fire-and-forget Node2D (DamagePopup pattern), 9 per-element AnimatedSprite2D from pixel_animations_gfxpack, static get_vfx_config()/build_sprite_frames(), integrated into action_execute_state.gd for attacks/abilities/healing, 7 new tests (988 total) (claude)
- [2026-02-19] T-0111: Add interaction indicators to Interactable objects — IndicatorType enum (NONE/INTERACT/SAVE), compute_indicator_text/visible static helpers, floating Label with bob tween, InteractionArea proximity show/hide, hides permanently after one_time use, gold color for SAVE, 11 tests (1104 total) (claude)
- [2026-02-19] T-0126: Show level-up callouts in victory screen — compute_level_up_callout_text() static helper (format: ★ Kael reached Level 4! HP+10, ATK+2), wired into _build_victory_party_section and level_up_messages array, 7 tests (1111 total) (claude)
- [2026-02-19] T-0095: Add battler idle bob animation in combat — BOB_AMPLITUDE=3.0px/BOB_HALF_PERIOD=0.6s looping sine-wave tween on sprite.position.y for both PartyBattlerScene and EnemyBattlerScene; pauses during attack/damage, stops on defeat, _exit_tree cleanup, 8 tests (1134 total) (claude)
- [2026-02-19] T-0097: Add save point visual markers in scenes — SavePointMarker script-only Node2D (ZoneMarker pattern): gold ★ Label with looping alpha pulse (0.4→1.0, PULSE_HALF_PERIOD=0.8s), z_index=1, _exit_tree cleanup; integrated into roothollow.gd with indicator_type=SAVE on SavePoint; 7 tests (1141 total) (claude)
- [2026-02-20] T-0077: Split verdant_forest.gd and overgrown_ruins.gd into tilemap/encounter modules — VerdantForestMap, VerdantForestEncounters, OvergrownRuinsMap, OvergrownRuinsEncounters (RefCounted modules); updated scene files to delegate; 11 new tests (1265 total) (claude)
- [2026-02-20] T-0168: Wire enemy crit routing — BattlerDamage.roll_crit(enemy.luck) in EnemyTurnState.ATTACK branch; 1.5x multiplier, CRITICAL_HIT SFX, DamagePopup.CRITICAL, "CRITICAL HIT!" log; 6 new tests (1271 total) (claude)
- [2026-02-20] T-0130: Live playtime accumulation — GameManager.playtime_seconds, compute_should_tick_playtime() static (OVERWORLD/MENU only), SaveManager.gather_save_data/save_game playtime param, SavePointStrategy wired; 9 new tests (1280 total) (claude)
- [2026-02-20] T-0099: Zone transition animations — TransitionType enum (FADE/SLIDE_LEFT/SLIDE_RIGHT), SLIDE_DURATION=0.4, compute_transition_type() static pure helper (adjacent overworld pairs slide, all else fade), _run_slide_transition() black ColorRect wipe, _run_fade_transition() refactored, _apply_spawn_point() extracted; 7 new tests in test_game_manager_transitions.gd (1445 total) (claude)
- [2026-02-20] T-0102: Zone compass in HUD — HudCompass static module (compute_compass_text/compute_compass_visible), ZONE_NEIGHBORS adjacency map, Unicode arrows, _setup_compass()/_update_compass() in hud.gd, bottom-left persistent label; 12 tests in test_hud_compass.gd (1457 total) (claude)
- [2026-02-20] T-0049: BUG fix — Verdant Forest camera limit_bottom already corrected to 400 in .tscn; added regression guard in test_verdant_forest_maps.gd (ground_map_height_px_matches_camera_limit_bottom); 1 new test (1458 total) (claude)
- [2026-02-20] T-0140: AudioManager SFX priority — SfxPriority enum (CRITICAL/NORMAL/AMBIENT), compute_sfx_player_index() pure static helper, play_sfx() updated with backward-compatible priority param, CLAUDE.md docs updated; 11 tests in test_audio_manager_sfx_priority.gd (1470 total after merge) (claude)
- [2026-02-20] T-0176: Reconcile BACKLOG.md — bulk-updated 72 task statuses from todo/in-progress to done via Python script; added T-0065 and T-0113 as done (superseded); added T-0177/T-0178/T-0179 to backlog; doc-only change (0 tests) (claude)
- [2026-02-20] T-0177: Wire SfxPriority.CRITICAL to combat death and crit SFX — added CRITICAL_PRIORITY_PATHS + compute_sfx_priority() to SfxLibrary; updated action_execute_state.gd + enemy_turn_state.gd; DEATH and CRITICAL_HIT now always play even when pool is busy; 8 new tests (1478 total) (claude)
- [2026-02-20] T-0018: Build skill tree framework — SkillTreeNodeData + SkillTreeData Resources, SkillTreeManager static utility (compute_can_unlock/compute_unlock_result), CharacterData skill_points + unlocked_skill_ids + skill_trees, LevelManager awards 1 SP/level, stat_abbreviation SP label; 17 tests (1495 total) (claude)
