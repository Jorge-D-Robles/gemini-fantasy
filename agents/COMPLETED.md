# Completed Tasks

Append-only archive. Each entry: `[date] T-XXXX: Title (agent)` or historical `[date] Description`.

---

## Pre-Tracker (2026-02-16 Audit)

These 26 fixes were completed before the ticket system was established:

- [2026-02-16] CRITICAL: Defeat state never ended battle — defeat_state.gd now calls battle_scene.end_battle(false) (claude)
- [2026-02-16] CRITICAL: Double-fire on target confirmation — removed callback pattern, now uses only target_selected signal (claude)
- [2026-02-16] CRITICAL: Hardcoded enum magic numbers — action_execute_state.gd now uses AbilityData.DamageStat.MAGIC etc. (claude)
- [2026-02-16] CRITICAL: Invisible battlers in battle — battle_scene.gd now instantiates visual scenes and binds to logic battlers (claude)
- [2026-02-16] CRITICAL: Iris recruitment post-battle unreachable — rewrote to use static functions and CONNECT_ONE_SHOT (claude)
- [2026-02-16] CRITICAL: Iris recruitment no victory check — post-battle now checks victory parameter (claude)
- [2026-02-16] CRITICAL: Duplicate Camera2D in Roothollow — fixed to use property override syntax (claude)
- [2026-02-16] CRITICAL: Missing icon.svg — created game/icon.svg placeholder (claude)
- [2026-02-16] CRITICAL: Missing audio bus layout — created default_bus_layout.tres with BGM and SFX buses (claude)
- [2026-02-16] HIGH: PartyManager array reference leak — get_active_party() and get_roster() now return .duplicate() (claude)
- [2026-02-16] HIGH: 6 trees missing collision in Roothollow — added StaticBody2D + CollisionShape2D (claude)
- [2026-02-16] HIGH: Dead code in player_turn_state.gd — removed unused pending variables (claude)
- [2026-02-16] HIGH: Dead DamageStat enum in CharacterData — removed duplicate from AbilityData (claude)
- [2026-02-16] HIGH: OVERLOAD_OUTGOING_DAMAGE_MULT type mismatch — changed int to float (claude)
- [2026-02-16] HIGH: TurnQueueState default to Victory on empty queue — now reinitializes turn order (claude)
- [2026-02-16] HIGH: Unused delta/event params — prefixed with _ in state.gd base class (claude)
- [2026-02-16] HIGH: NPC global dialogue signal — changed to CONNECT_ONE_SHOT per interaction (claude)
- [2026-02-16] HIGH: Duplicate AIType enum — EnemyBattler now uses EnemyData.AiType directly (claude)
- [2026-02-16] HIGH: Ability target_type ignored — target_select_state.gd now reads ability target_type (claude)
- [2026-02-16] HIGH: UILayer wrong type annotations — removed incorrect CanvasLayer type annotations (claude)
- [2026-02-16] MEDIUM: BattleAction parameter shadowing — renamed to p_ability/p_target in static constructors (claude)
- [2026-02-16] MEDIUM: VerdantForest to OvgrownRuins no spawn point — added spawn_from_forest Marker2D (claude)
- [2026-02-16] MEDIUM: Misleading sub-resource name — renamed RectangleShape2D_garrick to CircleShape2D_garrick (claude)
- [2026-02-16] MEDIUM: @onready with .new() — game_manager.gd now initializes in _setup_transition_layer() (claude)
- [2026-02-16] MEDIUM: HUD duck-typing — hud.gd now casts member to BattlerData (claude)
- [2026-02-16] MEDIUM: NPC portrait null warning — added push_warning() when portrait fails to load (claude)

## Sprint S01 — Foundation

- [2026-02-16] T-0001: WONTFIX — class_name on autoloads conflicts with singleton names; reverted (claude)
- [2026-02-16] T-0002: Extract TurnQueue into its own scene (claude)
- [2026-02-16] T-0003: Refactor Interactable into composition pattern — strategy pattern with 5 strategies (claude)
- [2026-02-16] T-0004: Replace Dictionary-based dialogue/encounter data with custom Resources (claude)
- [2026-02-16] T-0005: Replace meta-based state communication with typed BattleAction (claude)
- [2026-02-16] T-0006: Use AnimatedSprite2D for player animation (claude)
- [2026-02-16] Add automated testing infrastructure — GUT 9.x + gdlint, 59 unit tests, /run-tests skill, pre-push hooks (claude)
- [2026-02-16] T-0020: Battle system real-time UI sync, attack animations, damage popups, status effect application, 25 new tests (claude)
- [2026-02-16] BUG FIX: Battle UI lockup when using skills — cancel/EE handling, 9 new tests (claude)
- [2026-02-16] AUDIT: Full codebase audit — 10 bugs fixed, 129 new tests (93→222), 4-agent parallel sweep (claude)

## Sprint S02 — First Playable Demo

- [2026-02-16] PLANNING: Demo requirements, tech gaps, NPC dialogue content, sprint plan — 4-agent planning team (claude)
- [2026-02-16] T-0012: Build inventory system — InventoryManager autoload, gold tracking, item stacking (claude)
- [2026-02-16] T-0027: Party HP/EE persistence — runtime state on PartyManager, battle read/write (claude)
- [2026-02-16] T-0028: Wire item usage in battle — ActionSelectState item mode, inventory consumption (claude)
- [2026-02-16] T-0029: Innkeeper healing — PartyManager.heal_all() via innkeeper interaction (claude)
- [2026-02-16] T-0030: Battle victory rewards — gold and loot drops applied to InventoryManager (claude)
- [2026-02-16] T-0019: XP and leveling system — LevelManager utility, stat growth, battler level scaling (claude)
- [2026-02-16] T-0031: NPC dialogue content — 5 Roothollow NPCs with 4-state flag-reactive dialogue (claude)
- [2026-02-16] DEMO BUILD: 8-agent parallel implementation — 125 new tests (222→347), 797 assertions (claude)
- [2026-02-16] T-0032: Build basic save/load system — SaveManager autoload, JSON to user://saves/, wired save points + title screen Continue (claude)
- [2026-02-16] T-0033: Add demo conclusion event — Elder Thessa's garrick-recruited dialogue now hooks Prismfall and gives narrative closure (claude)
- [2026-02-16] T-0034: BUG FIX — Dialogue/encounter overlap — BattleManager guards against dialogue/cutscene/transition, scene handlers check state, 6 new tests (claude)
- [2026-02-16] INFRA: Scene preview tool — screenshot capture for agent visual verification, 3 camera modes, /scene-preview skill (claude)
- [2026-02-16] T-0013: Build equipment system — EquipmentData resource, EquipmentManager autoload, 5 slots, 16 weapon types, battler stat integration, save/load, 30 new tests (claude)
- [2026-02-16] T-0017: Implement status effect system — StatusEffectData resource, duration tracking, DoT/HoT, stat modifiers, stun/action prevention, backward-compatible API, battle state integration, 40 new tests (claude)
- [2026-02-16] T-0015: Resonance gauge UI and overload/hollow mechanics — Hollow penalizes all stats at 50%, Resonant +20% ability bonus, cure_hollow, battle log transitions, tween animations, per-member indicators, 17 new tests (claude)
- [2026-02-16] T-0016: Build quest tracking system — QuestData Resource, QuestManager autoload, objective tracking, prerequisite checking, save/load integration, 32 new tests (claude)
- [2026-02-16] T-0007: Wire unconnected signals to EventBus — EventBus autoload, entity signal relay, enemy_defeated/item_acquired/area_entered wiring, QuestManager flag_checker auto-connect, 22 new tests (claude)
- [2026-02-18] T-0035: Create Lyra character data and abilities — mage/healer stats, echo_mend, memory_strike, resonance_shield (claude)
- [2026-02-18] T-0036: Create The Last Gardener boss enemy data — BOSS AI, HP 350, vine_lash, crystal_bloom, photosynthesis, weak to FIRE (claude)
- [2026-02-18] T-0037: Create additional character abilities — flame_blade (Kael), precision_shot (Iris), iron_fortress (Garrick) (claude)
- [2026-02-18] T-0038: Create additional items and equipment — hi_potion, elixir, smoke_bomb, steel_sword, crystal_staff, chain_mail, mystic_ring, iron_shield (claude)
- [2026-02-18] T-0039: Create quest data files — herb_gathering, scouts_report, elder_wisdom with objectives and rewards (claude)
- [2026-02-18] T-0040: Build shop system — ShopData Resource, ShopManager autoload, buy/sell with price modifiers, 27 tests (claude)
- [2026-02-18] T-0041: Build inventory UI — category filtering, item use/equip, gamepad focus navigation, dark purple theme (claude)
- [2026-02-18] T-0042: Build shop UI — buy/sell mode tabs, item comparison, price display, gamepad navigation (claude)
- [2026-02-18] T-0043: Wire Lyra recruitment — OpeningSequence extended with Lyra dialogue and PartyManager.add_character (claude)
- [2026-02-18] T-0044: Build boss encounter — BossEncounter event, pre/post-battle dialogue, can_escape=false, boss_defeated flag (claude)
- [2026-02-18] T-0045: Wire shop NPC and side quests — Bram shop, 3 quest NPCs, memorial marker, quest chain logic (claude)
- [2026-02-18] T-0046: Integration — lint fixes, test fixes, file sync, 582/582 tests passing (claude)
- [2026-02-18] T-0047: Visual overhaul — multi-tile mushroom buildings, distinct NPC sprites, forest tree objects, sealed boundaries, broken symmetry (claude)
- [2026-02-18] T-0048: Organic tilemap overhaul — multi-terrain ground patches (3 types per scene), detail coverage 20-25%, all 3 scenes (claude)

## Sprint S03 — Demo Polish

- [2026-02-19] T-0049: BUG — Verdant Forest camera limit already fixed in codebase (claude)
- [2026-02-19] T-0051: Battle backgrounds — programmatic gradient backgrounds per area type (forest/ruins/town/cave), 10 tests (claude)
- [2026-02-19] T-0069: Extract shared UI helpers — ui_theme.gd (19 color constants), ui_helpers.gd (clear_children, setup_focus_wrap, create_panel_style), refactored 6 UI files, 19 tests (claude)
- [2026-02-19] T-0071: Centralize game balance constants — game_balance.gd (22 constants, 7 categories), refactored battler/enemy_battler/level_manager/party_manager/battle_ui, 23 tests (claude)
- [2026-02-19] T-0052: Color-code battle log messages — LogType enum + 7 LOG_* colors in ui_theme.gd, BBCode color wrapping in add_battle_log(), 25 call sites across 8 files, 16 tests (claude)
- [2026-02-19] T-0053: Floating damage numbers — reusable DamagePopup component (DAMAGE/HEAL/CRITICAL types), replaced inline single-label in both battler scenes, added show_heal_number() to EnemyBattlerScene, 11 tests (claude)
- [2026-02-19] T-0062: Boundary collision walls — MapBuilder.create_boundary_walls() static method, 4 invisible StaticBody2D walls per scene on collision layer 2, all 3 scenes wired, fixed CLAUDE.md map dimensions, 12 tests (claude)
- [2026-02-19] T-0059: Roothollow AbovePlayer canopy overlay — CANOPY_LEGEND (3 FOREST_OBJECTS tiles: center, left-edge, right-edge) + CANOPY_MAP at inner border edges, build_layer wired in _setup_tilemap() (claude)
- [2026-02-19] T-0087: On-screen objective tracker UI — PanelContainer in HUD below PartyStatus, QuestTitle + ObjectiveLabel labels, static compute_tracker_state() for TDD, 4 QuestManager signal connections, 7 tests (claude)
- [2026-02-19] T-0088: Zone transition markers — ZoneMarker script-only Node2D with _draw() chevron, alpha pulse + directional bob tweens, optional destination label, all 3 scenes wired (4 exits), 11 tests (claude)
- [2026-02-19] T-0089: NPC interaction indicators — IndicatorType enum (NONE/CHAT/QUEST/QUEST_ACTIVE/SHOP), floating Label with bob animation, proximity show/hide, dialogue-aware, dynamic quest-state for Roothollow NPCs, 13 tests (claude)
- [2026-02-19] T-0090: Quest log/journal UI — script-only Control from pause menu, Active/Completed tabs, quest list + detail panel, objectives/checkmarks, reward previews, compute_quest_list() pure function, QuestsButton in pause menu, 8 tests (claude)
- [2026-02-19] T-0079: Expand opening sequence — 6 to 23 lines matching Chapter 1 story script (discovery, analysis, first contact, identity, warning, resolve), _build_dialogue() helper, 9 tests (claude)
- [2026-02-19] T-0081: Expand Iris recruitment — 7 to 19 lines matching Chapter 3 story script (combat encounter, identity reveal, Resonance Cage, Lyra reveal, Dane foreshadowing, pragmatic joining), extracted _build_pre_battle_dialogue() + static _build_post_battle_lines(), 12 tests (claude)
- [2026-02-19] T-0082: Expand Garrick recruitment — 6 to 17 lines matching Chapter 4 story script (Iris Shepherd recognition, identity reveal, crystal corruption, Willowmere confession, Lyra proposition, conditions, honey cakes), extracted _build_dialogue(), 10 tests (claude)
- [2026-02-19] T-0080: Expand Lyra discovery dialogue — 23 to 48 lines compressing Ch1S5 + Ch2S2 (structured fragmentation, sealed truth, Resonance energy/fading, emotional connection, fragment quest hook), 6 new content tests (16 total) (claude)
- [2026-02-19] T-0070: Split battler.gd — 3 static utility classes (BattlerDamage, BattlerResonance, BattlerStatus) with delegation, tick_effects() kept in Battler, 28 new tests (779 total) (claude)
- [2026-02-19] T-0064: Integrate BGM playback — scene-owned BGM (SCENE_BGM_PATH + _start_scene_music), BattleManager battle/boss BGM with EnemyData.AiType.BOSS detection, victory fanfare, title BGM, AudioManager.get_current_bgm_path(), null-safe OGG loading, 8 tests (787 total) (claude)
- [2026-02-19] T-0050: BUG fix — Overgrown Ruins spawn position check used fragile Vector2.ZERO comparison, replaced with unconditional spawn point set (GameManager/SaveManager override after _ready) (claude)
